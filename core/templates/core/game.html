{% extends 'core/base.html' %}

{% block title %}Guess the Song from Its Blurred Album Cover!{% endblock %}

{% block content %}
<h1>Guess the Song!</h1>

<form method="post" id="guess-form">
    {% csrf_token %}
    <ul>
        {% for track in top_tracks %}
            <li>
                <img src="{{ track.top_song_image }}" alt="Album cover for {{ track.name }}" class="album-cover" style="width: 100px; height: 100px; object-fit: cover;">
                <input type="text" name="guess_{{ track.id }}" placeholder="Guess the song..." class="guess-input" />
                <input type="hidden" name="track_id_{{ track.id }}" value="{{ track.id }}">
            </li>
        {% empty %}
            <li>No top tracks available</li>
        {% endfor %}
    </ul>

    <button type="submit" id="submit-guess">Submit Guess</button>
</form>

{% if correct_guesses is not none %}
    <p>You guessed {{ correct_guesses }} tracks correctly!</p>
{% endif %}

<!-- Button to reload tracks -->
<form method="get" action="{% url 'game' %}">
    <input type="hidden" name="reload" value="true">
    <button type="submit" id="reload-button">Reload Images</button>
</form>

{% endblock %}
